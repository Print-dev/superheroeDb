use superhero;

select * from alignment; -- Bandos
SELECT * FROM attribute;	-- Atributos / caracteristicas
select * from colour;		-- Lista de colores
SELECT * FROM comic;		-- no se utilizara
SELECT * FROM gender;		-- generos // 1. male, 2. female, 3.NA
select * from publisher;		-- Casa publicacion / distribuidores
select * from race;			-- Razas
select * from superhero;	-- super heroes
select * from superpower;

-- PROCEDURE
DELIMITER $$
CREATE PROCEDURE spu_listar_superheores(IN _id INT)
BEGIN
	SELECT 
		su.id,
        su.superhero_name,
        su.full_name,
        ge.gender,
        ra.race
		FROM 
        superhero su
        INNER JOIN gender ge ON ge.id = su.gender_id
        INNER JOIN race ra ON ra.id = su.race_id
        WHERE publisher_id = _id
        ORDER BY id ASC;
END $$


DELIMITER $$
CREATE PROCEDURE spu_listar_publisher()
BEGIN
	SELECT *
		FROM 
        publisher;
END $$


DELIMITER $$
CREATE PROCEDURE spu_listar_bandos()
BEGIN
	SELECT 
		ali.alignment AS nombre_bando,
        COUNT(su.id) AS superheroe
		FROM 
        alignment ali
		INNER JOIN superhero su ON su.alignment_id = ali.id
        GROUP BY ali.id, ali.alignment;

END $$


DELIMITER $$
CREATE PROCEDURE spu_listar_bandos_por_publishers(IN _id INT)
BEGIN
	SELECT 
		ali.alignment as nombre_bando,
		COUNT(su.id) as superheroe
		FROM 
        alignment ali
        INNER JOIN superhero su ON su.alignment_id = ali.id
        INNER JOIN publisher pub ON pub.id = su.publisher_id
        WHERE pub.id = _id
        GROUP BY ali.id, ali.alignment;
END $$
